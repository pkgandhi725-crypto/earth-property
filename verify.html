<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Get Verified</title>
</head>
<body>

<h2>Premium Dealer Verification</h2>

<input type="text" id="bizName" placeholder="Business Name">
<br><br>
<button id="submitBtn">Submit for Verification</button>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDJ_qGtz1lx_orG4brwp4xUHWdrKctgJ50",
  authDomain: "earth-properties-c3c56.firebaseapp.com",
  projectId: "earth-properties-c3c56"
};
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();

document.getElementById('submitBtn').onclick = async () => {
  const user = auth.currentUser;
  if (!user) {
    alert("Login first");
    return;
  }

  const bizName = document.getElementById('bizName').value;
  if (!bizName) {
    alert("Enter business name");
    return;
  }

  try {
    await db.collection("verification_requests")
      .doc(user.uid)
      .set({
        businessName: bizName,
        idProofUrl: "CLOUDINARY_URL",
        paymentUrl: "CLOUDINARY_URL",
        status: "pending",
        userId: user.uid,
        submittedAt: firebase.firestore.FieldValue.serverTimestamp()
      }, { merge: true });

    alert("âœ… Submitted successfully");
  } catch (e) {
    alert(e.message);
  }
};
</script>

</body>
</html>
